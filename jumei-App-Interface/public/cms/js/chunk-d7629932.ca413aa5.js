(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d7629932"],{"68ab":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"update"}},[a("el-breadcrumb",{attrs:{id:"breadcrumb","separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/admin"}}},[e._v("首页")]),a("el-breadcrumb-item",{attrs:{to:{path:"/admin/activeEdit"}}},[e._v("活动管理")]),a("el-breadcrumb-item",[e._v("活动更新")])],1),a("el-form",{ref:"form",attrs:{id:"form_add",model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"活动名称"}},[a("el-input",{model:{value:e.form.activeName,callback:function(t){e.$set(e.form,"activeName",t)},expression:"form.activeName"}})],1),a("el-form-item",{attrs:{label:"活动类型"}},[a("el-input",{model:{value:e.form.activeType,callback:function(t){e.$set(e.form,"activeType",t)},expression:"form.activeType"}})],1),a("el-form-item",{attrs:{label:"优惠"}},[a("el-input",{model:{value:e.form.disCount,callback:function(t){e.$set(e.form,"disCount",t)},expression:"form.disCount"}})],1),a("el-form-item",{attrs:{label:"小图"}},[a("el-input",{model:{value:e.form.smIcon,callback:function(t){e.$set(e.form,"smIcon",t)},expression:"form.smIcon"}})],1),a("el-form-item",{attrs:{label:"活动图片"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://www.mocky.io/v2/5185415ba171ea3a00704eed/posts/","show-file-list":!1,"on-success":e.handleAvatarSuccess}},[e.activeImage?a("img",{staticClass:"avatar",attrs:{src:e.activeImage}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("input",{attrs:{type:"hidden"},domProps:{value:e.OldimageUrl}})])],1),a("input",{attrs:{type:"hidden"},domProps:{value:e.OldimageUrl}}),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onUpdate}},[e._v("更新")])],1)],1)],1)},s=[],o=(a("e18c"),a("96db"),a("af86"),a("f1a9"),{props:["postId"],data:function(){return{form:{activeName:"",activeType:"",smIcon:"",disCount:""},activeImage:"",OldimageUrl:"",file:{}}},methods:{handleAvatarSuccess:function(e,t){this.file=t.raw,this.activeImage=URL.createObjectURL(t.raw)},onUpdate:function(){var e=this,t=this.file,a=new FormData;a.append("filename",t),a.append("activeName",this.form.activeName),a.append("activeType",this.form.activeType),a.append("smIcon",this.form.smIcon),a.append("disCount",this.form.disCount),a.append("activeImage",this.activeImage),a.append("OldimageUrl",this.OldimageUrl),a.append("postId",this.postId),this.$axios.post("/api/active/activeUpdate",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){0==t.data.code&&e.$message({message:"更新成功",type:"success"})})).catch((function(t){e.$message({message:"更新失败，请重新操作",type:"error"})}))}},mounted:function(){var e=this;this.$axios.get("/api/active/activeFind",{params:{postId:this.postId}}).then((function(t){0==t.data.code&&(e.form=t.data.info,e.activeImage=t.data.info.activeImage,e.OldimageUrl=e.activeImage)})).catch((function(t){e.$message({message:"更新失败，请重新操作",type:"error"})}))}}),r=o,c=(a("986d"),a("2c07")),n=Object(c["a"])(r,i,s,!1,null,null,null);t["default"]=n.exports},"7e88":function(e,t,a){},"986d":function(e,t,a){"use strict";a("7e88")}}]);
//# sourceMappingURL=chunk-d7629932.ca413aa5.js.map