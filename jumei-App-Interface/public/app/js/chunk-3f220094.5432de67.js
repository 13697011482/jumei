(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f220094"],{a55b:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"login"}},[n("van-nav-bar",{attrs:{title:"登录","right-text":"注册","left-text":"返回"},on:{"click-right":e.changeState,"click-left":e.goBack}}),n("van-form",{attrs:{id:"loginForm"},on:{submit:e.onSubmit}},[n("div",{staticClass:"title"},[n("span",[e._v("使用聚美账号登录")])]),n("van-field",{attrs:{name:"username",placeholder:"已注册的账号",rules:[{required:!0,message:"请输入账号"}]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),n("van-field",{attrs:{type:"password",name:"password",placeholder:"6-16位登录密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("van-field",{staticClass:"checkCode",attrs:{type:"text",name:"checkCode",placeholder:"请输入下图验证码",rules:[{required:!0,message:"请填写验证码"}]},model:{value:e.checkCode,callback:function(t){e.checkCode=t},expression:"checkCode"}}),n("img",{ref:"checkImg",attrs:{src:e.checkImg,alt:""},on:{click:e.changeSrc}}),n("div",{staticStyle:{margin:"16px"}},[n("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit",color:"#feb2c5"}},[e._v(" 登录 ")])],1)],1)],1)},c=[],r=(n("ecb4"),{data:function(){return{username:"",password:"",checkCode:"",checkImg:""}},created:function(){this.changeSrc()},methods:{changeState:function(){this.$router.push("/register")},goBack:function(){history.go(-1)},onSubmit:function(e){var t=this;this.$axios.post("/api/users/login",{username:this.username,password:this.password,checkCode:this.checkCode}).then((function(e){0==e.data.code?(t.$notify({type:"success",message:"登录成功"}),t.$store.commit("SET_USERNAME",t.username),localStorage.setItem("token",e.data.token),localStorage.setItem("username",t.username),t.username="",t.password="",t.checkCode="",t.$router.push("/home")):e.data.errmsg.indexOf("checkCode")>-1?(t.$notify({type:"danger",message:"验证码错误"}),t.changeSrc()):t.$notify({type:"danger",message:"账号密码错误"})})).catch((function(e){console.log(e),t.$notify({type:"danger",message:"登录失败"})}))},changeSrc:function(){this.checkImg="/api/users/checkCode?"+Math.random()}}}),s=r,o=(n("d6db"),n("2c07")),i=Object(o["a"])(s,a,c,!1,null,null,null);t["default"]=i.exports},d6db:function(e,t,n){"use strict";n("f008")},d7e1:function(e,t,n){"use strict";var a=n("efe2");e.exports=function(e,t){var n=[][e];return!!n&&a((function(){n.call(null,t||function(){throw 1},1)}))}},ecb4:function(e,t,n){"use strict";var a=n("1c8b"),c=n("45af").indexOf,r=n("d7e1"),s=n("ff9c"),o=[].indexOf,i=!!o&&1/[1].indexOf(1,-0)<0,u=r("indexOf"),d=s("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:i||!u||!d},{indexOf:function(e){return i?o.apply(this,arguments)||0:c(this,e,arguments.length>1?arguments[1]:void 0)}})},f008:function(e,t,n){},ff9c:function(e,t,n){var a=n("1e2c"),c=n("efe2"),r=n("faa8"),s=Object.defineProperty,o={},i=function(e){throw e};e.exports=function(e,t){if(r(o,e))return o[e];t||(t={});var n=[][e],u=!!r(t,"ACCESSORS")&&t.ACCESSORS,d=r(t,0)?t[0]:i,l=r(t,1)?t[1]:void 0;return o[e]=!!n&&!c((function(){if(u&&!a)return!0;var e={length:-1};u?s(e,1,{enumerable:!0,get:i}):e[1]=1,n.call(e,d,l)}))}}}]);
//# sourceMappingURL=chunk-3f220094.5432de67.js.map